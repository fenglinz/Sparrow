@using Mercurius.Siskin.Contracts
@using Mercurius.Siskin.Entities.RBAC
@{
    var userGroups = this.ViewBag.UserGroups as ResponseCollection<UserGroup>;
    var tree = userGroups.Datas.AsTree(u => u.ParentId == "0", (p, u) => u.ParentId == p.Id, u => new TreeNode { Id = u.Id, Text = u.Name });
}
@model UserGroup
@section Styles
    {
    @Styles.Render("~/Content/tree/css")
}
@section Scripts
{
    @Scripts.Render("~/bundles/tree", "~/bundles/validate")
    <script type="text/javascript">
        function OnSave() {
            if (JudgeValidate('#frmSave')) {
                $('#frmSave').submit();
            }
        }
    </script>
}
@using (Ajax.BeginForm("CreateOrUpdate", "UserGroup", null, new AjaxOptions { HttpMethod = "POST" }, new { @id = "frmSave", @class = "form-horizontal form", @role = "form" }))
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(m => m.Id)
    <div class="form-group form-group-sm">
        <label class="col-sm-3 control-label" for="Name">用户组名称</label>
        <div class="col-sm-8">
            @Html.TextBoxFor(m => m.Name, new { @class = "form-control", @validate_field = "用户组名称", @validate_rule = "notNull" })
        </div>
    </div>
    <div class="form-group form-group-sm">
        <label class="col-sm-3 control-label" for="Code">用户组编号</label>
        <div class="col-sm-8">
            @Html.TextBoxFor(m => m.Code, new { @class = "form-control", @validate_field = "用户组编号", @validate_rule = "notNull" })
        </div>
    </div>
    <div class="form-group form-group-sm">
        <label class="col-sm-3 control-label" for="ParentId">所属用户组</label>
        <div class="col-sm-8">
            @TreeHelper.CreateComboTree(tree, "ParentId", this.ViewBag.ParentId, Model == null ? null : Model.Id)
        </div>
    </div>
    <div class="form-group form-group-sm">
        <label class="col-sm-3 control-label" for="Sort">显示顺序</label>
        <div class="col-sm-8">
            @Html.TextBoxFor(m => m.Sort, new { @class = "form-control", @validate_field = "显示顺序", @validate_rule = "int" })
        </div>
    </div>
    <div class="form-group form-group-sm">
        <label class="col-sm-3 control-label" for="Remark">描述信息</label>
        <div class="col-sm-8">
            @Html.TextAreaFor(m => m.Remark, new { @class = "form-control", @style = "height: 75px;" })
        </div>
    </div>
}