<?xml version="1.0" encoding="utf-8" ?>
<CommandTexts xmlns="http://www.mercurius.com/CommandText.xsd">
  <!-- 获取数据库字段信息。 -->
  <CommandText name="GetColumns" commandType="Text">
    <![CDATA[
      SELECT 
        COLUMN_NAME as `Name`,
        COLUMN_NAME AS `PropertyName`,
        CASE IS_NULLABLE WHEN 'NO' then 1 else 0 end AS `IsNullable`,
        DATA_TYPE AS `DataType`,
        CHARACTER_MAXIMUM_LENGTH AS `DataLength`, 
        CASE COLUMN_KEY WHEN 'PRI' THEN 1 else 0 END AS `IsPrimaryKey`,
        CASE when LOCATE('auto_increment',EXTRA)<>0 then 1 else 0 END AS `IsIdentity`,
        COLUMN_COMMENT AS `Description`,
        ORDINAL_POSITION AS `Sort`
      FROM information_schema.`COLUMNS` 
      WHERE TABLE_SCHEMA=@database AND TABLE_NAME=@table
    ]]>
  </CommandText>

  <!-- 修改字段注释 -->
  <CommandText name="CommentColumn" commandType="Text">
    <![CDATA[
      COMMENT ON COLUMN "{0}"."{1}"."{2}" IS '{3}';
    ]]>
  </CommandText>
</CommandTexts>